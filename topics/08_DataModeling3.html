<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>Chemometrics and Statistics</title>

  <link rel="stylesheet" href="../dist/reset.css">
  <link rel="stylesheet" href="../dist/reveal.css">
  <link rel="stylesheet" href="../dist/theme/iac.css">
  <link rel="stylesheet" href="../css/mystyles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

  <!-- Theme used for syntax highlighted code -->
  <link rel="stylesheet" href="../plugin/highlight/monokai.css">
  <link rel="stylesheet" href="../dist/theme/simple.css" media="print">
  <style>
    .green-text {
      color: rgb(133, 198, 42);
    }

    .teal-text {
      color: rgb(0, 150, 136);
    }

    .small-text {
      font-size: 0.8em;
    }
  </style>
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <section>
        <h2><span class="green-text">C</span>hemometrics & <span class="teal-text">S</span>tatistics</h2>
        <pre><code>08. Data Modeling 3</code></pre>
        <h4>Machine Learning</h4>
        <p style="text-align: right; font-size: medium;">by <a href="https://www.uni-due.de/iac/gerrit_renner.php"
            target="_blank">Gerrit Renner</a></p>
      </section>

      <section>
        <h4>Initial Thoughts on <span class="post-it-strip">Machine Learning</span></h4>
        <img src="../resources/apple.jpeg" alt="Apple Image" style="width: auto; height: 400px;">
        <div>
          <div class="leftBox">
            <p class="question">
              What is shown in the image?
            </p>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <p class="task">
              Describe how you draw your conclusion.
            </p>
          </div>
        </div>
      </section>

      <section data-transition="zoom-in slide-out">
        <h4>Initial Thoughts on <span class="post-it-strip">Machine Learning</span></h4>
        <img src="../resources/dragon fruit.jpeg" alt="Dragon Fruit Image" style="width: auto; height: 400px;">
        <div>
          <div class="leftBox">
            <p class="question">
              What is shown in the image?
            </p>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <p class="task">
              Describe how you draw your conclusion.
            </p>
          </div>
        </div>
      </section>

      <section data-transition="zoom-in slide-out">
        <h4>Initial Thoughts on <span class="post-it-strip">Machine Learning</span></h4>
        <img src="../resources/coffee beans.jpeg" alt="Coffee Beans Image" style="width: auto; height: 400px;">
        <div>
          <div class="leftBox">
            <p class="question">
              What is shown in the image?
            </p>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <p class="task">
              Describe how you draw your conclusion.
            </p>
          </div>
        </div>
      </section>

      <section data-transition="zoom-in slide-out">
        <h4>Initial Thoughts on <span class="post-it-strip">Machine Learning</span></h4>
        <img src="../resources/dogs_1.jpeg" alt="Dogs or Muffins Image" style="width: auto; height: 400px;">
        <div>
          <div class="leftBox">
            <p class="question">
              Can we classify the images as dogs or muffins?
            </p>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <p class="task">
              Describe how you draw your conclusion.
            </p>
          </div>
        </div>
      </section>

      <section>
        <h4>
          Insights from <span class="post-it-strip">Initial Thoughts</span>
        </h4>
        <div>
          <div class="leftBox">
            <p class="mainBullet">
              <strong>Humans recognize patterns instinctively:</strong>
            </p>
            <p class="subBullet">
              We rely on prior knowledge (e.g., apples, dragon fruit).
            </p>
            <p class="subBullet">
              Familiar features like color, texture, and shape help us make decisions.
            </p>
            <p class="mainBullet fragment fade-up" data-fragment-index="1">
              <strong>Some classifications are straightforward:</strong>
            </p>
            <p class="subBullet fragment fade-up" data-fragment-index="1">
              Distinctive features make certain objects easy to identify.
            </p>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <p class="mainBullet fragment fade-up" data-fragment-index="2"">
              <strong>Some classifications are challenging:</strong>
            </p>
            <p class="subBullet fragment fade-up" data-fragment-index="2"">
              We do not have prior knowledge (e.g., coffee beans).
            </p>
            <p class="mainBullet fragment fade-up" data-fragment-index="3">
              <strong>Ambiguity is a challenge:</strong>
            </p>
            <p class="subBullet fragment fade-up" data-fragment-index="3">
              Overlap in features (e.g., dogs vs. muffins) creates confusion.
            </p>
            <p class="mainBullet fragment fade-up" data-fragment-index="4">
              <strong>Machine Learning's key questions:</strong>
            </p>
            <p class="subBullet fragment fade-up" data-fragment-index="4">
              How can algorithms recognize patterns like humans? <span class="post-it-strip">characteristic features</span>
            </p>
            <p class="subBullet fragment fade-up" data-fragment-index="4">
              How can ambiguity and errors be reduced? <span class="post-it-strip">high quality data</span>
            </p>
          </div>
        </div>
      </section>


      <section>
        <h4>
          What is <span class="post-it-strip">Machine Learning</span>?
        </h4>
        <div>
          <div class="leftBox">
            <p class="mainBullet">
              <strong>Definition:</strong><br>
              <span style="font-size: x-large; font-style: italic;">
                Machine Learning is a subset of Artificial Intelligence (AI) that enables systems to learn and improve
                from data without explicit programming.
              </span>
            </p>
            <div class="fragment fade-up" data-fragment-index="1">
              <p class="mainBullet">
                <strong>Objectives</strong> of ML:
              </p>
              <div class="fragment fade-up" data-fragment-index="2">
                <p class="subBullet">
                  Classification<br>
                  <span style="font-size: large; font-style: italic;">
                    Predicting discrete categories, e.g., identifying spam emails, or classifying water quality.
                  </span>
                </p>
              </div>
              <div class="fragment fade-up" data-fragment-index="3">
                <p class="subBullet">
                  Regression<br>
                  <span style="font-size: large; font-style: italic;">
                    Predicting continuous values, e.g., forecasting house prices, or estimating chemical concentrations.
                  </span>
                </p>
              </div>
            </div>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <div class="fragment fade-up" data-fragment-index="4">
              <p class="mainBullet">
                <strong>Types</strong> of ML:
              </p>
              <div class="fragment fade-up" data-fragment-index="5">
                <p class="subBullet">
                  Supervised Learning<br>
                  <span style="font-size: large; font-style: italic;">
                    Learning from labeled data, e.g., classifying images as "cat" or "dog" or predicting blood glucose
                    levels. <span class="post-it-strip">Reference data</span>
                  </span>
                </p>
              </div>
              <div class="fragment fade-up" data-fragment-index="6">
                <p class="subBullet">
                  Unsupervised Learning<br>
                  <span style="font-size: large; font-style: italic;">
                    Finding hidden patterns in unlabeled data, e.g., customer segmentation or anomaly detection. <span
                      class="post-it-strip">No reference data</span>
                  </span>
                </p>
              </div>
              <div class="fragment fade-up" data-fragment-index="7">
                <p class="subBullet">
                  Reinforcement Learning<br>
                  <span style="font-size: large; font-style: italic;">
                    Learning by interacting with an environment, e.g., training robots or game-playing AI. <span
                      class="post-it-strip">Feedback from environment</span>
                  </span>
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>


      <section>
        <h4>
          Important <span class="post-it-strip">Terms</span> in ML
        </h4>
        <div>
          <div class="leftBox">
            <p class="mainBullet">
              <strong>Features: </strong><br>
              <span style="font-size: large; font-style: italic;">
                Input variables that describe the data, e.g., temperature, pH, turbidity in water quality analysis.
              </span>
            </p>
            <p class="mainBullet">
              <strong>Labels: </strong><br>
              <span style="font-size: large; font-style: italic;">
                Output variables that define the target, e.g., "potable" or "non-potable" in water quality classification.
              </span>
            </p>
            <p class="mainBullet">
              <strong>Training Data: </strong><br>
              <span style="font-size: large; font-style: italic;">
                Dataset used to train the model, consisting of features and labels.
              </span>
            </p>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <p class="mainBullet">
              <strong>Model: </strong><br>
              <span style="font-size: large; font-style: italic;">
                Algorithm that learns patterns from training data to make predictions.
              </span>
            </p>
            <p class="mainBullet">
              <strong>Testing Data: </strong><br>
              <span style="font-size: large; font-style: italic;">
                Dataset used to evaluate the model's performance on unseen data.
              </span>
            </p>
            <p class="mainBullet">
              <strong>Metrics: </strong><br>
              <span style="font-size: large; font-style: italic;">
                Measures used to assess model performance, e.g., accuracy.
              </span>
            </p>
          </div>
        </div>
      </section>

      <section>
        <h4>
          Complexity, Generalization, and <span class="post-it-strip">Over- & Underfitting</span>
        </h4>
        <div>
          <div class="leftBox">
            <p class="mainBullet">
              <strong>Underfitting:</strong> Model is too simple, fails to capture patterns (high bias).
            </p>
            <p class="mainBullet">
              <strong>Overfitting:</strong> Model is too complex, captures noise instead of patterns (high variance).
            </p>
            <p class="mainBullet">
              <strong>Generalization:</strong> Balance between bias and variance, enabling good performance on unseen
              data.
            </p>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <div class="image-box">
              <div class="tabs">
                <div class="tab active" data-tab="underfit">Underfitting</div>
                <div class="tab" data-tab="overfit">Overfitting</div>
                <div class="tab" data-tab="general">Generalization</div>
              </div>
              <div class="tab-content active" data-tab="underfit" style="height: 400px;">
                <img src="../resources/overfitting(1).png" alt="Underfitting" style="width: auto; height: 100%;">
              </div>
              <div class="tab-content" data-tab="overfit" style="height: 400px;">
                <img src="../resources/overfitting(2).png" alt="Overfitting" style="width: auto; height: 100%;">
              </div>
              <div class="tab-content" data-tab="general" style="height: 400px;">
                <img src="../resources/overfitting(3).png" alt="Generalization" style="width: auto; height: 100%;">
              </div>
              <p class="caption" style="text-align: center; font-size: small; color: gray;">
                Balancing Model Complexity: A trade-off between underfitting and overfitting.
              </p>
            </div>
          </div>
        </div>
      </section>


      <section>
        <h4>
          The principle of <span class="post-it-strip">Logistic Regression</span>
        </h4>
        <div>
          <div class="leftBox">
            <p class="mainBullet">
              <strong>What is Logistic Regression?</strong>
            </p>
            <p class="subBullet">
              A statistical method used to predict the probability of a binary outcome (e.g., yes/no, 0/1).
            </p>
            <p class="mainBullet">
              <strong>How does it work?</strong>
            </p>
            <p class="subBullet">
              Maps input variables to probabilities using the sigmoid function:
              <code> P = 1 / (1 + exp(-z)) </code>, where <code>z</code> is a linear combination of inputs.
            </p>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <div class="image-box">
              <div id="chart_logistic1"></div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h4>
          Applications, Pros, and Cons of <span class="post-it-strip">Logistic Regression</span>
        </h4>
        <div>
          <div class="leftBox">
            <p class="mainBullet">
              <strong>Applications:</strong>
            </p>
            <p class="subBullet">
              Environmental Toxicology:<br>
              <span style="font-size: large; font-style: italic;">
                a) Predicting acute toxicity levels in water samples based on chemical concentrations.
              </span>
            </p>
            <p class="subBullet">
              Water Quality Monitoring:<br>
              <span style="font-size: large; font-style: italic;">
                a) Classifying water samples as "potable" or "non-potable" based on parameters like turbidity,
                conductivity, and bacterial count.
                <br>
                b) Identifying pollution sources by classifying samples into "industrial" vs. "agricultural"
                contamination.
              </span>
            </p>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <p class="mainBullet">
              <strong>Pros:</strong><br>
              <span style="font-size: large; font-style: italic;">
                Simple and interpretable, works well for linearly separable data.
              </span>
            </p>
            <p class="mainBullet">
              <strong>Cons:</strong><br>
              <span style="font-size: large; font-style: italic;">
                Limited to binary outcomes, struggles with non-linear relationships and outliers.
              </span>
            </p>
          </div>
        </div>
      </section>

      <section>
        <h4>
          The principle of <span class="post-it-strip">Support Vector Machines</span>
        </h4>
        <div>
          <div class="leftBox">
            <p class="mainBullet">
              <strong>What is a Support Vector Machine?</strong>
            </p>
            <p class="subBullet">
              A supervised machine learning algorithm used for classification and regression tasks.
            </p>
            <p class="mainBullet">
              <strong>How does it work?</strong>
            </p>
            <p class="subBullet">
              SVMs find the hyperplane that best separates data points into different classes, maximizing the margin
              between the closest points (support vectors) of each class.
            </p>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <div class="tabs">
              <div class="tab active svm-tab" data-tab="svm1">SVM</div>
              <div class="tab svm-tab" data-tab="svm2">Zoom-in Margin</div>
            </div>
            <div class="tab-content active svm-tab" data-tab="svm1">
              <img src="../resources/support-vector-machine-svm.webp" alt="Support Vector Machine" style="width: auto; height: auto;">
            </div>
            <div class="tab-content svm-tab" data-tab="svm2">
              <img src="../resources/decision-margin-svm.webp" alt="Support Vector Machine" style="width: auto; height: auto;">
            </div>
              <p style="text-align: center; font-style: italic; font-size: medium;">https://spotintelligence.com/2024/05/06/support-vector-machines-svm/</p>
          </div>
        </div>
      </section>

      <section>
        <h4>
          Applications, Pros, and Cons of <span class="post-it-strip">Support Vector Machines</span>
        </h4>
        <div>
          <div class="leftBox">
            <p class="mainBullet">
              <strong>Applications:</strong>
            </p>
            <p class="subBullet">
              Environmental Toxicology:<br>
              <span style="font-size: large; font-style: italic;">
                a) Classifying pollutants in water samples based on chemical fingerprints.
              </span>
            </p>
            <p class="subBullet">
              Water Quality Monitoring:<br>
              <span style="font-size: large; font-style: italic;">
                a) Detecting harmful algae blooms by analyzing spectral data.
                <br>
                b) Identifying contamination sources using multi-parameter datasets.
              </span>
            </p>
            <p class="mainBullet">
              <strong>Pros:</strong><br>
              <span style="font-size: large; font-style: italic;">
                Effective for high-dimensional spaces, works well with non-linear data using kernel trick.
              </span>
            </p>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <img src="../resources/data-transformed-svm.webp" alt="SVM Applications" style="width: auto; height: 100%;">
            <p style="text-align: center; font-style: italic; font-size: medium;">https://spotintelligence.com/2024/05/06/support-vector-machines-svm/</p>
            <p class="mainBullet">
              <strong>Cons:</strong><br>
              <span style="font-size: large; font-style: italic;">
                Computationally expensive for large datasets, sensitive to choice of kernel and hyperparameters.
              </span>
            </p>
          </div>
        </div>
      </section>

      <section>
        <h4>
          The principle of <span class="post-it-strip">Random Forest</span>
        </h4>
        <div>
          <div class="leftBox">
            <p class="mainBullet">
              <strong>What is Random Forest?</strong>
            </p>
            <p class="subBullet">
              An ensemble learning method that combines multiple decision trees to improve accuracy and reduce
              overfitting.
            </p>
            <p class="mainBullet">
              <strong>Key Features:</strong>
            </p>
            <p class="subBullet">
              Uses bootstrapping and random feature selection.<br>
              Aggregates outputs (majority vote for classification, average for regression).
            </p>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <img src="../resources/rf_scheme.png" alt="Random Forest Scheme" style="width: auto; height: 100%;">
            <p style="text-align: center; font-style: italic; font-size: medium;">Random Forest Scheme
              (https://www.datacamp.com/de/tutorial/random-forests-classifier-python)</p>
          </div>
        </div>
      </section>

      <section>
        <h4>
          What is a <span class="post-it-strip">Decision Tree</span>?
        </h4>
        <div>
          <div class="leftBox">
            <div class="tabs">
              <div class="tab active decision-tree-tab" data-tab="node">Node</div>
              <div class="tab decision-tree-tab" data-tab="split">Tree</div>
            </div>
            <div class="tab-content active decision-tree-tab" data-tab="node">
              <img src="../resources/decision_tree_node.png" alt="Decision Tree Node" style="width: auto; height: 350px;">
            </div>
            <div class="tab-content decision-tree-tab" data-tab="split">
              <img src="../resources/decision_tree_node2.png" alt="Decision Tree Split" style="width: auto; height: 350px;">
            </div>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <p class="mainBullet">
              <strong>What is a Decision Tree?</strong><br>
              <span style="font-size: large; font-style: italic;">
                A tree-like model for making decisions based on splitting data by specific criteria.
              </span>
            </p>
            <p class="mainBullet">
              <strong>How it works:</strong><br>
              <span style="font-size: large; font-style: italic;">
                a) Splits data based on a feature and threshold to maximize separation.<br>
                b) Grows branches until a stopping criterion is met (e.g., min samples or max depth).
            </p>
            <p class="mainBullet">
              <strong>Components of a Decision Tree:</strong><br>
              <span style="font-size: large; font-style: italic;">
                <strong>Root Node:</strong> Represents the entire dataset and the first split.<br>
                <strong>Decision Nodes:</strong> Points where the data is split further.<br>
                <strong>Leaf Nodes:</strong> Terminal nodes showing the final result.<br>
                <strong>Branches:</strong> Connect nodes and represent the outcome of a decision.
              </span>
            </p>
          </div>
        </div>
      </section>

      <section>
        <h4>
          What is an <span class="post-it-strip">Ensemble Approach</span>?
        </h4>
        <div>
          <div class="leftBox">
            <p class="mainBullet">
              <strong>Definition:</strong><br>
              <span style="font-size: large; font-style: italic;">
                Combining predictions from multiple decision trees to improve overall model performance.
              </span>
            </p>
            <p class="mainBullet">
              <strong>How it works:</strong>
            </p>
            <p class="subBullet">
              Builds multiple decision trees from different subsets of data.
            </p>
            <p class="subBullet">
              Each tree contributes a vote (classification) or prediction (regression).
            </p>
            <p class="subBullet">
              The final output is based on majority vote (classification) or average (regression).
            </p>
          </div>
          <div class="spacer"></div>
          <div class="rightBox">
            <p class="mainBullet">
              <strong>Example in RF:</strong><br>
              <pre style="font-size: large;">
                <code data-trim data-noescape>
                  Tree 1: Class A
                  Tree 2: Class B
                  Tree 3: Class A
                  Final Prediction: Majority vote = Class A

                  Regression:
                  Tree 1: 5.2
                  Tree 2: 5.5
                  Tree 3: 5.1
                  Final Prediction: Average = 5.27
                </code>
              </pre>
            </p>
            <p class="mainBullet">
              <strong>Why use an ensemble?</strong>
            </p>
            <p class="subBullet">
              Reduces overfitting by averaging predictions.
            </p>
            <p class="subBullet">
              Improves robustness and accuracy.
            </p>
            <p class="subBullet">
              Handles noisy data better than a single tree.
            </p>
          </div>
        </div>
</section>

<section>
  <h4>
    What is <span class="post-it-strip">Boot Strap Sampling</span> in RF?
  </h4>
  <div>
    <div class="leftBox">
      <p class="mainBullet">
        <strong>Definition:</strong><br>
        <span style="font-size: large; font-style: italic;">
          Resampling technique used to create subsets of data for training individual decision trees.
        </span>
      </p>
      <p class="mainBullet">
        <strong>Idea behind Bootstrapping:</strong><br>
        <span style="font-size: large; font-style: italic;">
          From a dataset of size N, create multiple subsets of size N by randomly sampling with replacement.
        </span>
      </p>
      <p class="mainBullet">
        <strong>Why it matters:</strong><br>
        <span style="font-size: large; font-style: italic;">
          a) Ensures diversity in decision trees.<br>
          b) Provides built-in validation using out-of-bag samples.
      </p>
    </div>
    <div class="spacer"></div>
    <div class="rightBox">
      <p class="mainBullet">
        <strong>In Practice:</strong>
        <pre><code data-trim data-noescape>
          original_dataset = [1, 2, 3, 4, 5]
          bootstrapped_tree1 = [2, 4, 5, 1, 2]
          bootstrapped_tree2 = [3, 5, 1, 3, 3]
          oob_sample_tree1 = [3]
          oob_sample_tree2 = [2, 4]
        </code>
      </pre>
      </p>
      <p class="mainBullet">
        <strong>How many trees are built?</strong><br>
        <span style="font-size: large; font-style: italic;">
          Typically, hundreds to thousands of trees are trained in a Random Forest. <strong>
            It is a hyperparameter that can be optimized.</strong>
          </strong>
        </span>
      </p>
      <p class="mainBullet">
        <strong>Example:</strong> <button onclick="drawBootstrapSample()">Draw Bootstrap Sample</button>
        <pre id="originalDataset" style="font-size: x-large;">
x = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</pre>
        <pre id="bootstrapSample" style="font-size: large; color: teal;">
          <!-- Bootstrap sample will appear here --></pre>
        <pre id="oobSample" style="font-size: large; color: gray;">
          <!-- OOB sample will appear here --></pre>
      </p>
    </div>
  </div>
</section>


<section>
  <h4>
    How to <span class="post-it-strip">set up</span> an RF?
  </h4>
  <div>
    <div class="leftBox">
      <p class="mainBullet">
        <strong>Structure of a Random Forest:</strong>
      </p>
      <p class="subBullet">
        Composed of multiple decision trees.
      </p>
      <p class="subBullet">
        Each tree is trained on a unique bootstrapped dataset.
      </p>
      <p class="subBullet">
        Not only the data but also the features are randomly sampled for each node in each tree.
      </p>
      <p class="subBullet">
        Feature that provides the best split of the data is selected.
      </p>
      <p class="subBullet">
        Trees grow independently until a stopping condition (e.g., max depth, min samples per leaf).
      </p>
    </div>
    <div class="spacer"></div>
    <div class="rightBox">
      <img src="../resources/rf_scheme2.webp" alt="Random Forest Scheme" style="width: auto; height: 100%;">
      <p style="text-align: center; font-style: italic; font-size: medium;">Random Forest Scheme
        (https://blog.dailydoseofds.com/p/your-random-forest-is-underperforming)</p>
      <p class="mainBullet">
        <strong>Key Features:</strong>
      </p>
      <p class="subBullet" style="font-size: large;">
        Combines outputs of trees using majority vote (classification) or averaging (regression).
      </p>
      <p class="subBullet" style="font-size: large;">
        Randomness ensures diversity in trees, reducing overfitting.
      </p>
      <p class="subBullet" style="font-size: large;">
        Out-of-bag (OOB) samples can validate model performance.
      </p>
    </div>
  </div>
</section>



<section>
  <h4>
    Find the best <span class="post-it-strip">Criterion</span> for a Knot
  </h4>
  <div>
    <div class="leftBox">
      <p class="mainBullet">
        <strong>Choosing the Best Feature:</strong>
      </p>
      <p class="subBullet" style="font-size: large;">
        At each node, a random subset of features is selected from the total features.
      </p>
      <p class="subBullet" style="font-size: large;">
        Each feature in the subset is evaluated to determine the best split for the data.
      </p>
      <p class="mainBullet">
        <strong>Criterion for Splitting:</strong>
      </p>
      <p class="subBullet" style="font-size: large;">
        Common criteria evaluate <strong>purity</strong> of the resulting child nodes after a split.
      </p>
      <p class="subBullet" style="font-size: large;">
        <strong>For classification:</strong><br>
        <span style="font-size: large; font-style: italic;">
          Gini Index: Measures impurity. Lower values are better.<br>
          \[ Gini = 1 - \sum_{i=1}^{n} p_i^2 \]
          where p is the proportion of samples in class i.
        </span>
      </p>
      <p class="subBullet" style="font-size: large;">
        <strong>For regression:</strong><br>
        <span style="font-size: large; font-style: italic;">
          Mean Squared Error (MSE): Evaluates the reduction in variance after a split.
        </span>
      </p>
    </div>
    <div class="spacer"></div>
    <div class="rightBox">
      <p class="mainBullet">
        <strong>How the Best Criterion is Determined:</strong>
      </p>
      <p class="subBullet" style="font-size: large;">
        For each feature and potential split point, calculate the criterion value.
      </p>
      <p class="subBullet" style="font-size: large;">
        Choose the split point that maximizes the improvement in purity or minimizes the error.)
      </p>
      <p class="mainBullet">
        <strong>Example:</strong>
      </p>
      <pre style="font-size: large;"><code data-trim data-noescape>
Feature Subset: [Turbidity, Conductivity, pH]
Turbidity (GI) | Conductivity (GI) | pH (GI)
  < 5.0: 0.2   |  < 100: 0.1       |  < 7.0: 0.3
  < 5.2: 0.3   |  < 150: 0.2       |  < 7.2: 0.2
  < 5.5: 0.4   |  < 200: 0.3       |  < 7.5: 0.4
  < 6.0: 0.8   |  < 250: 0.4       |  < 8.0: 0.2

Best Split: Conductivity < 100 (Gini Index = 0.1)
      </code></pre>
      <p class="mainBullet">
        <strong>Why it Matters:</strong>
      </p>
      <p class="subBullet" style="font-size: large;">
        Ensures the tree makes the most informative splits, leading to accurate predictions.
      </p>
      <p class="subBullet" style="font-size: large;">
        Balances complexity and data splitting quality.
      </p>
    </div>
  </div>
</section>

<section>
  <h4>
    Example for <span class="post-it-strip">Gini Index</span>
  </h4>
  <div>
    <div class="leftBox">
      <img src="../resources/criterion_selection.png" alt="Decision Tree Split" style="width: auto; height: auto;">
      <p style="text-align: center; font-style: italic; font-size: medium;">
        Possible splits for a decision tree node.
      </p>
    </div>
    <div class="spacer"></div>
    <div class="rightBox">
      <p class="mainBullet">
        <strong>A: out1 (5, 2); out2 (2, 3)</strong>
        <span style="font-size: large; ">
        \[ Gini_1 = 1 - \left( \left( \frac{6}{7} \right)^2 + \left( \frac{2}{7} \right)^2 \right) \approx 0.375 \]
        \[ Gini_2 = 1 - \left( \left( \frac{2}{5} \right)^2 + \left( \frac{3}{5} \right)^2 \right) = 0.48 \]
        \[ Gini_{\text{split}} = \frac{n_1}{n} \times Gini_1 + \frac{n_2}{n} \times Gini_2 \]
        \[ Gini_{\text{split}} = \frac{8}{13} \times 0.375 + \frac{5}{13} \times 0.48 \approx 0.42 \]
        </span>
      </p>
      <p class="subBullet">
        <strong>Other Splits:</strong><br>
        <span style="font-size: large; font-style: italic;">
        B) Gini Index: 0.47<br> 
        C) Gini Index: 0.26<br>
        D) Gini Index: 0.29
        </span>
      </p>
    </div>
    </div>
</section>

<section>
  <h4>
    What if I have <span class="post-it-strip">Multiple classes</span>?
  </h4>
  <div>
    <div class="leftBox">
      <img src="../resources/decision_trees2.png" alt="Decision Tree Split" style="width: auto; height: auto;">
    </div>
    <div class="spacer"></div>
    <div class="rightBox">
      <p class="mainBullet">
        <strong>Handling Multiple Classes:</strong>
      </p>
      <p class="subBullet" style="font-size: large;">
        A Decision Tree can handle multiple classes as the Gini Index can be extended to multi-class problems.
      </p>
      <p class="subBullet" style="font-size: large;">
        This will lead to a cascade of binary splits to separate the classes.
      </p>
      <p class="mainBullet">
        <strong>Example:</strong>
      </p>
      <p class="subBullet" style="font-size: large;">
        <strong>Classes:</strong> A, B, C
      </p>
      <p class="subBullet" style="font-size: large;">
        <strong>Root node:</strong> mainly separated into A and not A.<br>
        <strong>Child node 1:</strong> further clean A into A and B.<br>
        <strong>Child node 2:</strong> further clean not A into B and C.
      </p>
    </div>
  </div>
</section>

<section>
  <h4>
    Understanding <span class="post-it-strip">Feature Importance</span> in RF
  </h4>
  <div>
    <div class="leftBox">
      <p class="mainBullet">
        <strong>What is Feature Importance?</strong>
      </p>
      <p class="subBullet" style="font-size: large;">
        A measure of how valuable each feature is for improving the model's performance.
      </p>
      <p class="mainBullet">
        <strong>How is it calculated?</strong>
      </p>
      <p class="subBullet" style="font-size: large;">
        <strong>Impurity-Based Importance:</strong> Sum of impurity reduction (e.g., Gini Index or MSE) for splits using the feature.
        \[ \text{Importance of feat.} = \sum_{\text{all trees}} \sum_{\text{all nodes}} \text{Impurity Reduction} \div \text{Total Impurity Reduction} \]
      </p>
      <p class="subBullet" style="font-size: large;">
      <strong>Permutation Importance:</strong> Decrease in model performance when feature values are shuffled.
      </p>
      <p class="mainBullet">
        <strong>Why is it important?</strong>
      </p>
      <p class="subBullet" style="font-size: large;">
        Identifies which features contribute most to predictions, aiding interpretability and model refinement.
      </p>
    </div>
    <div class="spacer"></div>
    <div class="rightBox">
      <p class="mainBullet">
        <strong>Example:</strong>
      </p>
      <pre style="font-size: large;">
        <code data-trim data-noescape>
Feature Importance:
Turbidity: 0.7
pH: 0.2
Conductivity: 0.1
      </code>
      </pre>
    </div>
  </div>
</section>



<section>
  <h4>
    Random Forest Example: <span class="post-it-strip">Classification</span>
  </h4>
  <div>
    <div class="leftBox">
    <p class="mainBullet">
      <strong>Problem:</strong><br>
      <span style="font-size: large; font-style: italic;">
        Classify water samples as "Potable" or "Non-Potable" based on turbidity, conductivity, and pH.
      </span>
<pre style="font-size: large;">
Turbidity | Conductivity | pH | Class
-------------------------------------
  5.0    |  100        |  7.0 | Potable
  5.2    |  150        |  7.2 | Non-Potable
  5.5    |  200        |  7.5 | Potable
  6.0    |  250        |  8.0 | Non-Potable
-------------------------------------
unknown samples:
  5.2    |  160        |  7.1 | ?
  6.5    |  300        |  8.5 | ?</pre>
    </p>
  </div>
    <div class="spacer"></div>
    <div class="rightBox">
      <div class="tabs">
        <div class="tab active" data-tab="step1">Step 1</div>
        <div class="tab" data-tab="step2">Step 2</div>
        <div class="tab" data-tab="step3">Step 3</div>
        <div class="tab" data-tab="step4">Step 4</div>
      </div>
      <div class="tab-content active" data-tab="step1">
        <p class="mainBullet">
          <strong>Step 1: Set Up Decision Trees</strong><br>
          <span style="font-size: large; font-style: italic;">
            Let's build 5 decision trees using bootstrapped samples and random feature selection.
          </span>
          <pre style="font-size: large;">
bootstrap_sample1 =
  [5.0, 100, 7.0, Potable]
  [5.0, 100, 7.0, Potable]
  [6.0, 250, 8.0, Non-Potable]
  [6.0, 250, 8.0, Non-Potable]

bootstrap_sample2 = ...</pre>
        </p>
    </div>
      <div class="tab-content" data-tab="step2">
        <p class="mainBullet">
          <strong>Step 2: Train Trees</strong><br>
          <span style="font-size: large; font-style: italic;">
            Train each tree on a bootstrapped sample.
          </span>
          <pre style="font-size: large;">
Tree 1: 
Root Node: Conductivity < 250 (Gini = 0.0)
No further splits needed (Purity = 100%)
OOB Samples for validation: 
[5.2, 150, 7.2, Non-Potable] -> Predicted: Potable
[5.5, 200, 7.5, Potable] -> Predicted: Potable

Tree 2: ...</pre>
</div>
      <div class="tab-content" data-tab="step3">
        <p class="mainBullet">
          <strong>Validation and Feature Importance</strong><br>
          <span style="font-size: large; font-style: italic;">
            Validate model performance by using out-of-bag samples.
          </span>
          <pre style="font-size: large;">
Out-of-Bag Samples:
T1: [5.2, 150, 7.2, Non-Potable] -> Potable
T1: [5.5, 200, 7.5, Potable] -> Potable
T2: [5.0, 100, 7.0, Potable] -> Potable
T3: [6.0, 250, 8.0, Non-Potable] -> Non-Potable
Error Rate: 25%</pre>  
<span style="font-size: large; font-style: italic;">
  Feature Importance:<br>
</span>
<pre style="font-size: large;">
  Conductivity = 0.3
  Turbidity = 0.6
  pH = 0.1</pre>
        </p>
      </div>
      <div class="tab-content" data-tab="step4">
        <p class="mainBullet">
          <strong>Final Prediction</strong><br>
          <span style="font-size: large; font-style: italic;">
            Combine tree predictions using majority vote.
          </span>
          <pre style="font-size: large;">
Unkown Sample 1: [5.2, 160, 7.1] 
  Votes: Potable, Potable, Non-Potable
  = Potable
Unkown Sample 2: [6.5, 300, 8.5] 
  Votes: Non-Potable, Non-Potable, Non-Potable 
  = Non-Potable</pre>
        </p>
      </div>
    </div>
  </div>
</section>

    </div>
    <div class="footer-global">
      Chemometrics & Statistics Lecture <br> by Gerrit Renner <br>
      Last updated: November 30, 2024
    </div>
  </div>
  <div id="clock">--:--</div>

  <script src="../dist/reveal.js"></script>
  <script src="../plugin/notes/notes.js"></script>
  <script src="../plugin/markdown/markdown.js"></script>
  <script src="../plugin/highlight/highlight.js"></script>
  <script src="../plugin/math/math.js"></script>
  <script src="../plugin/menu/menu.js"></script>
  <!-- Anything plugin -->
  <!-- Chart plugin -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.4.4/math.min.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="../plugin/chartscii/dist/bundle.js"></script>
  <script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
      parallaxBackgroundImage: '../resources/bg3.png', // URL of your background image
      // Parallax background size (optional)
      parallaxBackgroundSize: '5376px 1512px', // Adjust to your desired size
      // Parallax background horizontal movement (optional)
      parallaxBackgroundHorizontal: 200, // Horizontal movement, adjust as needed
      menu: {
        custom: [{
          title: 'Topics',
          icon: '<i class="fas fa-home"></i>',
          src: 'menu.html'
        }]
      },
      hash: true,
      // Learn about plugins: https://revealjs.com/plugins/
      plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealMath.KaTeX, RevealMenu],
    });
    // Funktion zum Aktualisieren der Uhrzeit
    function updateClock() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');
      document.getElementById('clock').textContent = `${hours}:${minutes}:${seconds}`;
    }

    // Uhrzeit sofort und dann jede Sekunde aktualisieren
    updateClock();
    setInterval(updateClock, 1000);
  </script>
  <!-- Chart scripts -->
  <script src="https://cdn.jsdelivr.net/npm/jstat@1.9.5/dist/jstat.min.js"></script>
  <script src="../resources/d3_utils.js"></script>
  <script src="../resources/chart_logistic_reg.js"></script>
  <script>
    function drawBootstrapSample() {
      const dataset = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
      const bootstrapSample = [];
      const oobSample = [...dataset]; // Clone the original dataset for OOB calculation
  
      // Draw bootstrap samples
      for (let i = 0; i < dataset.length; i++) {
        const index = Math.floor(Math.random() * dataset.length);
        const value = dataset[index];
        bootstrapSample.push(value);
  
        // Remove value from OOB if it's in bootstrap
        const oobIndex = oobSample.indexOf(value);
        if (oobIndex > -1) {
          oobSample.splice(oobIndex, 1);
        }
      }
  
      // Update UI with formatted bootstrap and OOB samples
      document.getElementById("bootstrapSample").textContent = 
        `sample = [ ${bootstrapSample.join(", ")} ]`;
      document.getElementById("oobSample").textContent = 
        `out-of-bag = [ ${oobSample.join(", ")} ]`;
    }
  </script>
</body>

</html>